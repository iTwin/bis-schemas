<?xml version="1.0" encoding="UTF-8"?>
<!-- =====================================================================================
|
|     $Source: Site.ecschema.xml $
|
|  $Copyright: (c) 2018 Bentley Systems, Incorporated. All rights reserved. $
|
======================================================================================= -->
<ECSchema schemaName="Site" alias="SITE" version="01.00.00" xmlns="http://www.bentley.com/schemas/Bentley.ECXML.3.1">
    <ECSchemaReference name="BisCore" version="01.00.01" alias="bis" />
    <ECSchemaReference name="BuildingSpacePlanning" version="01.00.00" alias="bsp"/>
    <ECSchemaReference name="AecUnits" version="01.00.01" alias="AECU"/>
    <ECSchemaReference name="SpatialComposition" version="01.00" alias="spcomp"/>

    <ECEntityClass typeName="Site" displayLabel="Site">
        <BaseClass>spcomp:CompositeElement</BaseClass>
        <BaseClass>spcomp:ICompositeBoundary</BaseClass>
        <BaseClass>bis:ISubModeledElement</BaseClass>
        <BaseClass>bsp:IEntity</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="SiteObject">
        <BaseClass>bsp:ObjectDefinitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="BuildableVolume" displayLabel="BuildableVolume">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECRelationshipClass typeName="BuildableVolumeConstrainsBuilding" strength="referencing" modifier="sealed">
        <BaseClass>bis:ElementDrivesElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <Source polymorphic="true" roleLabel="contstrains" multiplicity="(0..1)">
            <Class class="BuildableVolume"/>
        </Source>
        <Target polymorphic="true" roleLabel="is contrained by" multiplicity="(0..*)">
            <Class class="bsp:Building"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="ParkingArea" displayLabel="ParkingArea">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <BaseClass>bis:ISubModeledElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <ECProperty propertyName="Area" displayLabel="Area" typeName="double" kindOfQuantity="AECU:AREA"/>
        <ECProperty propertyName="Lots" displayLabel="Lots" typeName="int"/>
        <ECProperty propertyName="Spaces" displayLabel="Spaces" typeName="int"/>
        <ECProperty propertyName="Islands" displayLabel="Islands" typeName="int"/>
        <ECProperty propertyName="ParkingAngle" displayLabel="Parking Angle" typeName="double" kindOfQuantity="AECU:Angle"/>
        <ECProperty propertyName="BayCurbRadius" displayLabel="Bay Curb Radius" typeName="double" kindOfQuantity="AECU:LENGTH"/>
        <ECProperty propertyName="IslandCurbRadius" displayLabel="Island Curb Radius" typeName="double" kindOfQuantity="AECU:LENGTH"/>
        <ECProperty propertyName="AisleWidth" displayLabel="Aisle Width" typeName="double" kindOfQuantity="AECU:LENGTH"/>
        <ECProperty propertyName="ParkingDepth" displayLabel="Parking Depth" typeName="double" kindOfQuantity="AECU:LENGTH"/>
        <ECProperty propertyName="ParkingWidth" displayLabel="Parking Width" typeName="double" kindOfQuantity="AECU:LENGTH"/>
        <ECProperty propertyName="ParkingPerIsland" displayLabel="Parking per Island" typeName="int"/>
    </ECEntityClass>

    <ECEntityClass typeName="ParkingLot" displayLabel="ParkingLot">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <BaseClass>bis:ISubModeledElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="ParkingIsland" displayLabel="ParkingIsland">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="UserDefinedParkingIsland" displayLabel="User defined parking island">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="ParkingSpace" displayLabel="ParkingSpace">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="SpaceDivider" displayLabel="Space divider">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECRelationshipClass typeName="SpaceDividerBoundsParkingSpace" strength="referencing" modifier="sealed">
        <BaseClass>bis:ElementRefersToElements</BaseClass>
        <Source polymorphic="false" roleLabel="bounds" multiplicity="(1..*)">
            <Class class="SpaceDivider"/>
        </Source>
        <Target polymorphic="false" roleLabel="is bound by" multiplicity="(1..*)">
            <Class class="ParkingSpace"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="SiteRequirement" displayLabel="Site">
        <BaseClass>bsp:AllocationRequirement</BaseClass>
        <BaseClass>bsp:IEntity</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
</ECSchema>
